/*
--------------------------------
Socialight
--------------------------------
+ Get Social Network Share Counts with Vanilla JS
+ https://github.com/pinceladasdaweb/Socialight
+ version 0.0.1
+ Copyright 2014 Pedro Rogerio
+ Licensed under the MIT license

+ Documentation: https://github.com/pinceladasdaweb/Socialight
*/
var jsonp=function(a,b){"use strict";var c,d,e=0;return c=b.head||b.getElementsByTagName("head")[0],d=b.createElement("script"),d.type="text/javascript",function(b,f,g){var h,i="jsonp_"+e++;b+=b.match(/\?/)?"&callback="+i:"?callback="+i,h=d.cloneNode(),h.src=b,a[i]=function(b){f.call(g||a,b),c.removeChild(h),h=null,delete a[i]},c.appendChild(h)}}(window,document),Socialight=function(a,b){"use strict";var c={config:function(a){this.container=a.container,this.share=a.share,this.twitterEndpoint="https://cdn.api.twitter.com/1/urls/count.json?url={url}",this.facebookEndpoint="https://graph.facebook.com/?id={url}",this.linkedinEndpoint="https://www.linkedin.com/countserv/count/share?url={url}",this.bufferEndpoint="https://api.bufferapp.com/1/links/shares.json?url={url}",this.gplusEndpoint="./plus.php?url={url}"},getJSON:function(b,c){var d=new a.XMLHttpRequest;b.url=b.url||location.href,b.data=b.data||null,d.open("GET",b.url,!0),d.send(b.data),d.onreadystatechange=function(){200===d.status&&4===d.readyState&&c(JSON.parse(d.responseText))}},loop:function(a,b){for(var c=0,d=a.length;d>c;)b(a[c],c),c+=1},create:function(a,c){var d,e=b.createElement(a);for(d in c)c.hasOwnProperty(d)&&(e[d]=c[d]);return e},abbrNum:function(a,b){b=Math.pow(10,b);for(var c=["k","m","b","t"],d=c.length-1;d>=0;d--){var e=Math.pow(10,3*(d+1));if(a>=e){a=Math.round(a*b/e)/b,1e3==a&&d<c.length-1&&(a=1,d++),a+=c[d];break}}return a},attach:function(a,c){var d=this,e=d.create("span",{className:"shares "+c}),f=b.createTextNode(a);return e.appendChild(f),e},request:function(){var a=this,c=b.querySelectorAll(a.container);a.loop(c,function(b){var c=b.getAttribute("data-url"),d=a.twitterEndpoint.replace("{url}",c),e=a.facebookEndpoint.replace("{url}",c),f=a.gplusEndpoint.replace("{url}",c),g=a.linkedinEndpoint.replace("{url}",c),h=a.bufferEndpoint.replace("{url}",c);a.share.twitter&&jsonp(d,function(c){b.appendChild(a.attach(a.abbrNum(c.count,1),"share-twitter").cloneNode(!0))}),a.share.facebook&&jsonp(e,function(c){b.appendChild(a.attach(a.abbrNum(c.shares,1),"share-facebook").cloneNode(!0))}),a.share.googlePlus&&a.getJSON({url:f},function(c){b.appendChild(a.attach(a.abbrNum(c.counter,1),"share-gplus").cloneNode(!0))}),a.share.linkedin&&jsonp(g,function(c){b.appendChild(a.attach(a.abbrNum(c.count,1),"share-linkedin").cloneNode(!0))}),a.share.buffer&&jsonp(h,function(c){b.appendChild(a.attach(a.abbrNum(c.shares,1),"share-buffer").cloneNode(!0))})})},init:function(a){c.config(a),c.request()}};return{init:c.init}}(window,document);